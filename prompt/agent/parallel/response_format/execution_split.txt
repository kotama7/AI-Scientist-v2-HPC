Return JSON only (no prose, no markdown fences). Use this schema to drive the 4-phase pipeline:
{
  "phase_artifacts": {
    "download": {"commands": [], "notes": "short"},
    "coding": {
      "workspace": {
        "root": "/workspace",
        "tree": ["workspace/", "workspace/src/", "workspace/working/"],
        "files": [
          {"path":"src/main.c","mode":"0644","encoding":"utf-8","content":"..."},
          {"path":"Makefile","mode":"0644","encoding":"utf-8","content":"..."}
        ]
      },
      "notes": "short"
    },
    "compile": {
      "build_plan": {
        "language": "c"|"cpp"|"fortran"|"python"|"other",
        "compiler_selected": "<one of available_compilers.name, or empty string for python>",
        "cflags": [],
        "ldflags": [],
        "workdir": "/workspace",
        "output": "bin/a.out"
      },
      "commands": ["... use {compiler_selected} or build_plan fields when templating ..."],
      "notes": "short"
    },
    "run": {
      "commands": ["..."],
      "expected_outputs": ["working/{experiment_name}_data.npy"],
      "notes": "short"
    }
  },
  "constraints": {
    "allow_sudo_in_singularity": true,
    "allow_apt_get_in_singularity": true,
    "write_only_under_workspace": true,
    "no_absolute_paths": true,
    "no_parent_traversal": true,
    "python_output_must_use_numpy": true,
    "non_python_output_must_use_npy": true
  }
}

Rules and reminders:
- Follow the four phases in order. Phase 1 handles downloads/installs (sudo/apt-get allowed inside Singularity with writable-tmpfs/overlay; if unavailable, install under /workspace such as pip --target /workspace/.pydeps or source builds).
- All commands will be executed inside Singularity containers; never suggest host-only actions or host package installs.
- Do not wrap commands with singularity/apptainer; provide the inner command only.
- Keep every path relative to /workspace; never emit absolute paths or parent traversal.
- In download/install, probe for tools before installing (e.g., `command -v git || sudo apt-get update && sudo apt-get install -y git`); avoid redundant installs.
- coding must list the workspace tree and every file to create; include working/ so /workspace/working/{experiment_name}_data.npy can be written.
- **Python experiments (language="python")**: Set compiler_selected to empty string (""), leave compile.commands as empty array [], and set output to "working/{experiment_name}_data.npy". The compile phase will be skipped. Run phase should execute python3 directly (e.g., "python3 src/main.py").
- **Compiled languages (c/cpp/fortran)**: compile must honor build_plan.compiler_selected taken from available_compilers; do not invent compilers or switch away from compiler_selected.
- run must produce /workspace/working/{experiment_name}_data.npy. If language is python, call numpy.save; otherwise output in .npy format (no Python post-processing for non-Python languages).
- Never mention or depend on language adapters, interpreter adapters, or external routers.
